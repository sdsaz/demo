<div class="flexlayout" *ngIf="!hasPermission && !accountForm">
    <div class="form_wrapper">
        <div id="no-access-form">
            <div class="top">
                <img src="assets/images/default/NoAccessImage.png" alt="" class="mb-3">
                <div class="subtitle mt-0">{{'CRM.ACCOUNT.DETAIL.MESSAGE_ACCOUNT_NOT_EXISTS' | translate |
                    configuredEntityName}}
                </div>
            </div>
        </div>
    </div>
</div>
<!-- If id is not exists then display message -->
<div class="flexlayout" *ngIf="!isInitialLoading && hasPermission">
    <div class="form_wrapper">
        <div id="no-access-form">
            <div class="top">
                <img src="assets/images/default/NoAccessImage.png" alt="" class="mb-3">
                <div class="subtitle mt-0">{{'CRM.ACCOUNT.DETAIL.MESSAGE_ACCOUNT_NOT_EXISTS' | translate |
                    configuredEntityName}}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="page-containted detail-accounts" *ngIf="isLoaded && accountForm && hasPermission">
    <!-- Header Start-->
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 mb-10px">
                <div class="detail-header h-100">
                    <div class="page-content card border-0 mb-0 h-100">
                        <div class="card-body p-card">
                            <div class="row vertical-center h-100">
                                <div class="col-xl col-lg-4 col-md-12 mb-3 mb-lg-0 mb-sm-4 d-flex align-self-start">
                                    <div class="float-left text-center">
                                        <div id="entity-icon" class="entity-icon">
                                            <i class="fas fa-building" aria-hidden="true"></i>
                                        </div>
                                    </div>

                                    <div class="stage-details float-start">
                                        <p class="m-0">
                                            <span class="card-title mb-1">
                                                <label id="headingEntity">{{ 'CRM.ACCOUNT.DETAIL.TITLE' |
                                                    translate | configuredEntityName}}</label>
                                                <div class="overflow-box"><strong id="nameEntity" class="pre-text">{{accountName}}</strong></div>
                                                <div>
                                                    <span id="entityRating" class="mt-2 h-21 mr-2 vertical-center">
                                                        <entity-review-display [entityTypeId]="entityTypeId" [entityId]="accountId" [isFromKanbanOrListView]="false"
                                                            [isEditPermission]="isEditAccount && !(account.isPaused ?? false)">
                                                        </entity-review-display>
                                                    </span>
                                                    <span *ngIf="account.entityRecordTypeName!=null" id="badgeEntityRecordType"
                                                        class="mt-2 h-21 badge badge-primary badge--status mr-2">
                                                        {{account.entityRecordTypeName}}
                                                    </span>
                                                    <span id="badgeActiveInactive"
                                                        [ngClass]="account.isActive == true ? 'bg-primary' : 'bg-danger'"
                                                        class="mt-2 h-21 badge badge--status mr-2">
                                                        {{ account.isActive | active }}
                                                    </span>
                                                    <span id="badgePaused" *ngIf="account.isPaused"
                                                        class="mt-2 h-21 badge badge-danger badge--status">
                                                        {{ account.isPaused == true ? 'Paused' : '' }}
                                                    </span>
                                                </div>
                                            </span>
                                        </p>
                                    </div>

                                </div>
                                <div class="col-xxl-9 col-xl-8 col-lg details-section col-md-12 align-self-start">
                                    <div class="row justify-content-between">
                                        <div *ngIf="isEntityWorkflow && isListViewLayout" class="col-header col-xxl col-xl col-lg-6 col-md-3 col-sm-4 mb-1 mb-sm-3 mb-md-0 mb-lg-3 mb-xl-0 pt-md-3 pt-lg-0">
                                            <div class="row">
                                                <div class="col-sm-12 col-header-label">
                                                    <label>{{
                                                        'CRM.ACCOUNT.DETAIL.STATUS' | translate }}</label>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p class="m-0"><strong
                                                            id="statusAccount">{{selectedStage?.name}}</strong></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div *ngIf="isHelpCode" class="col-header col-xxl col-xl col-lg-6 col-md-3 col-sm-4 mb-1 mb-sm-3 mb-md-0 mb-lg-3 mb-xl-0 pt-md-3 pt-lg-0">
                                            <div class="row">
                                                <div class="col-sm-12 col-header-label">
                                                    <label>{{
                                                        'CRM.ACCOUNT.DETAIL.HELPCODE' | translate }}</label>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p class="m-0"><strong
                                                            id="shortcodeAccount">{{account.shortCode}}</strong></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-header col-xxl col-xl col-lg-6 col-md-3 col-sm-4 mb-1 mb-sm-3 mb-md-0 mb-lg-3 mb-xl-0 pt-md-3 pt-lg-0">
                                            <div class="row">
                                                <div class="col-sm-12 col-header-label col-created-label">
                                                    <label>{{ 'CRM.ACCOUNT.DETAIL.HEADER_CREATED' | translate }}</label>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p class="m-0" id="lblCreatedDate">
                                                        {{account.created | date }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-header col-xxl col-xl col-lg-6 col-md-3 col-sm-4 mb-1 mb-sm-3 mb-md-0 mb-lg-3 mb-xl-0 pt-md-3 pt-lg-0">
                                            <div class="row">
                                                <div class="col-sm-12 col-header-label col-type-label">
                                                    <label>{{ 'CRM.ACCOUNT.DETAIL.HEADER_TYPE' | translate }}</label>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p class="m-0" id="lblType">
                                                        {{account.typeName}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        
                                        <div *ngIf="isEntityWorkflow" class="col-header col-xxl col-xl col-time-section col-lg-6 col-md-3 col-sm-4 mb-1 mb-sm-3 mb-md-0 mb-lg-3 mb-xl-0 pt-md-3 pt-lg-0">
                                            <div class="row mb-1 mb-sm-2">
                                                <div class="col-sm-12 col-header-label">
                                                    <label>{{ 'CRM.ACCOUNT.DETAIL.TOTAL_SPENT_TIME' | translate }}</label>
                                                    <i class="fas fa-info-circle dark-grey ml-1 info-tooltip" tooltipClass="custom-tooltip-class" [ngbTooltip]="('CRM.ACCOUNT.DETAIL.TOLLTIP_DURATION' | translate).replace('[[hoursInDay]]',hoursInDay)" placement="top top-left" container="body" aria-hidden="true"></i>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p-skeleton *ngIf="!totalSpentTime; else showTotalSpentTime" width="8rem"></p-skeleton>
                                                    <ng-template #showTotalSpentTime>
                                                        <p class="m-0" id="lblTotalSpentTime">
                                                            {{ totalSpentTime }}
                                                        </p>
                                                    </ng-template>
                                                </div>
                                            </div>
                                            <div class="row mb-1 mb-sm-2">
                                                <div class="col-sm-12 col-header-label">
                                                    <label>{{ 'CRM.ACCOUNT.DETAIL.TOTAL_EFFECTIVE_TIME' | translate }}</label>
                                                    <i class="fas fa-info-circle dark-grey ml-1 info-tooltip" tooltipClass="custom-tooltip-class" [ngbTooltip]="('CRM.ACCOUNT.DETAIL.TOLLTIP_DURATION' | translate).replace('[[hoursInDay]]',hoursInDay)" placement="top top-left" container="body" aria-hidden="true"></i>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p-skeleton *ngIf="!totalEffectiveTime; else showTotalEffectiveTime" width="8rem"></p-skeleton>
                                                    <ng-template #showTotalEffectiveTime>
                                                        <p class="m-0" id="lblTotalEffectiveTime">
                                                            {{ totalEffectiveTime }}
                                                        </p>
                                                    </ng-template>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12 col-header-label">
                                                    <label>{{ 'CRM.ACCOUNT.DETAIL.TOTAL_PAUSE_TIME' | translate }}</label>
                                                    <i class="fas fa-info-circle dark-grey ml-1 info-tooltip" tooltipClass="custom-tooltip-class" [ngbTooltip]="('CRM.ACCOUNT.DETAIL.TOLLTIP_DURATION' | translate).replace('[[hoursInDay]]',hoursInDay)" placement="top top-left" container="body" aria-hidden="true"></i>
                                                </div>
                                                <div class="col-sm-12 col">
                                                    <p-skeleton *ngIf="!totalPauseTime; else showTotalPauseTime" width="8rem"></p-skeleton>
                                                    <ng-template #showTotalPauseTime>
                                                        <p class="m-0" id="lblTotalPauseTime">
                                                            {{ totalPauseTime }}
                                                        </p>
                                                    </ng-template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="back-arrow col-lg">
                                    <div class="row">
                                        <div class="col-12">
                                            <button id="btn-back" class='btn btn-secondary mb-12px' type='button' (click)="backToList()">
                                                {{ 'CRM.ACCOUNT.DETAIL.BUTTON_BACK' | translate }}
                                            </button>
                                        </div>
                                        <div *ngIf="isEditAccount && !account.isPaused" class="col-12">
                                            <div class="dropdown">
                                                <button class="btn btn-primary dropdown-toggle btn-action"
                                                type="button" id="dropdownActionMenu"
                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                {{ 'CRM.ACCOUNT.DETAIL.BUTTON_ACTION' | translate }}
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownActionMenu">
                                                    <a id="link-change-status" (click)="onStatusChange()" class="dropdown-item menu--item">
                                                        <i class="fas fa-toggle-on" aria-hidden="true"></i>
                                                        {{'CRM.ACCOUNT.DETAIL.ACTION_TITLE_CHANGESTATUS' | translate }}
                                                    </a>
                                                    <a *ngIf="isCalculateERC && isShowCalculateERC && account.isActive" id="link-calculate-erc" (click)="onCalculateErc()" class="dropdown-item menu--item">
                                                        <i class="fas fa-solid fa-calculator" aria-hidden="true"></i>
                                                        {{ 'CRM.ACCOUNT.DETAIL.ACTION_TITLE_CALCULATE_ERC' | translate }}
                                                    </a>
                                                    <a *ngIf="isPrepare941x && isShowPrepare941x && account.isActive" id="link-generate-941x-files" (click)="onGenerate941xClick()" class="dropdown-item menu--item">
                                                        <i class="fas fa-file-pdf" aria-hidden="true"></i>
                                                        {{'CRM.ACCOUNT.DETAIL.ACTION_TITLE_PREPARE_941X_FILES' | translate }}
                                                    </a>
                                                    <a *ngIf="isSendDocumentsForEsign && isShowSendDocumentsForEsign && account.isActive" id="link-send-documents-for-esign" (click)="onSend941xDocumentsForEsignClick()" class="dropdown-item menu--item">
                                                        <i class="fas fa-file-signature" aria-hidden="true"></i>
                                                        {{'CRM.ACCOUNT.DETAIL.ACTION_TITLE_SEND_941x_DOCUMENT_FOR_ESIGN' | translate }}
                                                    </a>
                                                    <a *ngIf="isDeleteAccount" id="link-delete" (click)="onDeleteAccountClick(account.id)" class="dropdown-item menu--item">
                                                        <i class="far fa-trash-alt me-1" aria-hidden="true"></i>
                                                        {{'CRM.ACCOUNT.DETAIL.ACTION_TITLE_DELETE' | translate }}
                                                    </a>
                                                    <!-- <a *ngIf="isEditAccount && account.isActive && !account.isPaused" id="link-status" class="dropdown-item" (click)="onStatusChange()">
                                                    <lable style="float: left;margin-right: 5px; margin-top: 3px;">
                                                        {{ 'CRM.ACCOUNT.LABLE_STATUS' | translate }}</lable>
                                                    <div class="switch switch-label switch-pill switch-primary">
                                                        <input [disabled]="!isEditAccount && account.isActive && !account.isPaused" type="checkbox"
                                                            id="swt-active-inactive" class="switch-input"
                                                            [(ngModel)]="account.isActive">
                                                        <div class="switch-slider switch--status"
                                                            [attr.data-checked]="'CRM.ACCOUNT.LABLE_SWITCH_ACTIVE' | translate"
                                                            [attr.data-unchecked]="'CRM.ACCOUNT.LABLE_SWITCH_INACTIVE' | translate">
                                                        </div>
                                                    </div>

                                                </a> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-12 col-lg-12 align-self-end align-tags top-margin-tags">
                                    <div class="vertical-bottom flex-nowrap justify-content-between">
                                        <entity-tags-view [refreshEntityTag]="refreshEntityTag" [entityId]="accountId"
                                            [entityTypeId]="entityTypeId" [entityRecordTypeId]="entityRecordTypeId">
                                        </entity-tags-view>
                                        <div class="pt-3 pl-3 pe-2 d-flex bookmark-icon">
                                            <ngx-bookmark [entityTypeId]="entityTypeId" [entityId]="accountId" [isEditPermission]="isEditAccount && !(account.isPaused ?? false)"
                                                class="font-18 me-3" [isFromKanbanOrListView]="false">
                                            </ngx-bookmark>
                                            <div *ngIf="account.isShowPauseOrResume">
                                                <i *ngIf="account.isPaused && (this._loggedInUser.userId == account.assignedTo || isResumeRecord)"
                                                    class="far fa-play-circle font-18 dark-grey cursor-pointer" tooltipClass="tooltip-backward-small"
                                                    [ngbTooltip]="'CRM.ACCOUNT.DETAIL.TOOLTIP_RESUME'| translate" id="resumeButton" container="body"
                                                    (click)="onAccountStagePauseChanged(account, false)"></i>
                                                <i *ngIf="!isEditAccount && account.isPaused && (this._loggedInUser.userId != account.assignedTo && !isResumeRecord)"
                                                    class="far fa-play-circle font-18 dark-grey cursor-pointer" tooltipClass="tooltip-backward-small"
                                                    [ngbTooltip]="'CRM.ACCOUNT.DETAIL.MESSAGE_RESUME_NOT_ACCESS'| translate" id="resumeButtonNotAccess"
                                                    container="body"></i>
                                                <i *ngIf="isEditAccount && !account.isPaused && (this._loggedInUser.userId == account.assignedTo || isResumeRecord)"
                                                    class="far fa-pause-circle font-18 dark-grey cursor-pointer" tooltipClass="tooltip-backward-small"
                                                    [ngbTooltip]="'CRM.ACCOUNT.DETAIL.TOOLTIP_PAUSE'| translate" id="pauseButton" container="body"
                                                    (click)="onAccountStagePauseChanged(account, true)"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End-->

    <!-- Body Start-->
    <div *ngIf="isEntityWorkflow  && !isListViewLayout" class="page-content container-fluid stage-process">
        <!-- Stages Buttons List Start -->
        <div class="con_scroll d-none d-lg-block d-md-block d-sm-none d-xs-none">
            <div class="btn-group btn-group-toggle arrow-steps mb-10px" data-toggle="buttons" #menuContent>
                <button type="button" class="btn btn-secondary btn--arrow" *ngFor="let stage of accountStages" id="btnStatusChange"
                    placement="top bottom" [ngbTooltip]="stage.name" triggers="hover" tooltipClass="tooltip-backward-small" container="body" [disabled]="!isEditAccount || !account.isActive || account.isPaused"
                    class="{{ 'btn btn-secondary btn--arrow ' + (stage | stageCss: currentStage) }}"
                    (click)="onMarkStageAsComplete(stage.id)">
                    <input type="radio" [name]="stage.name" autocomplete="off">
                    <span class="btn_name">{{ stage.name }}</span>
                </button>
            </div>
        </div>

        <div class="d-lg-none d-md-none d-sm-block d-xs-block py-2">
            <label>{{ 'CRM.ACCOUNT.DETAIL.STAGE_TITLE' | translate }}</label>
            <p-dropdown id="drp-StatusChange" *ngIf="selectedStage" class="form-control mb-2" [disabled]="!isEditAccount|| !account.isActive || account.isPaused" 
                [options]="accountStages" [(ngModel)]="selectedStage" (onChange)="onMarkStageAsComplete($event.value.id)">
                <ng-template let-stage pTemplate="selectedItem">
                    <div>{{stage.name}}</div>
                </ng-template>
                <ng-template let-stage pTemplate="item">
                        <div>{{stage.name}}</div>
                </ng-template>
            </p-dropdown>
        </div>
        <!-- Stages Buttons List End -->
    </div>

    <!-- Body Start-->
    <div class="page-content container-fluid pr-0">
        <div class="row h---100vh w-100">
            <div class="col col-xl-8 col-lg-12 mb-xl-0 mb-2 pr-0 details-box">
                <!-- nav Tab Menu Start -->
                <div class="navTabs card-bottom-border border-0 p-card">
                    <div class="row width--100 border-bottom m-0 first-tabs">
                       <!-- Tab Section here -->
                       <ng-container>
                        <ngx-globle-nav-tab [navTabs]="navTabs" [isNativeTab]="isNativeTab"  (setTab)="checkTabCall($event,1)"
                            class="col tabs-mobile p-0" (closeTab)="closeNavTab($event)"
                            [ngClass]="{'edit-icon-section': isReadOnly && !( tabsNameHideAction | showHidePencilButton: activeTab)}"></ngx-globle-nav-tab>
                        </ng-container>
                        <div class="col-auto edit-form-icon px-0">
                            <div *ngIf="isEditAccount && account.isActive && !account.isPaused">
                                <i class="fas fa-pencil-alt pencil-icon fa-lg clr-blue float-right cursor-pointer"
                                    aria-hidden="true" id="btnEditTabDetail" (click)="showHideDetailTab('EDIT')"
                                    *ngIf="isReadOnly && !(tabsNameHideAction | showHidePencilButton: activeTab)"></i>
                            </div>
                            <!-- Global save and cancel start -->
                            <div *ngIf="!isReadOnly && !(tabsNameHideAction | showHidePencilButton: activeTab)" class="form-update-icons">
                                <i id="btn-cancel" *ngIf="isEditAccount && account.isActive && !account.isPaused"
                                    class="fas fa-times fa-lg dark-grey float-right mr-3"
                                    (click)="showHideDetailTab('CANCEL')" aria-hidden="true"></i>
                                <i *ngIf="isEditAccount && account.isActive && !account.isPaused" id="btn-save"
                                    class="fas fa-check fa-lg clr-blue float-right" (click)="showHideDetailTab('SAVE')" aria-hidden="true"></i>
                            </div>
                            <!-- Global save and cancel end -->
                        </div>
                    </div>

                    <!-- Tab Content Start -->
                    <form [hidden]="isAdditionalTab" [formGroup]="accountForm">
                        <div class="tab-content border-0 mt-0" id="accountDetailTabContent">
                            <!-- Details Start-->
                            <div class="tab-pane fade px-0 p-0" id="navDetails" role="tabpanel" [ngClass]="selectedTab == 'navDetails' ? 'show active' : ''"
                                aria-labelledby="navDetails-tab" name="navDetails">

                                <!-- Basic Information Start-->
                                <div class="card border-0 m-0 pt-md-0 pt-3">
                                    <div class="card-header btn-card-edit py-0">
                                        <span class="vertical-center py-md-3 pt-0 pb-3 line-height-1">{{
                                            'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BASIC_INFO' | translate }}</span>
                                    </div>
                                    <div class='card-body'>
                                        <div class='row'>
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>
                                                    {{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.NAME' | translate }}
                                                    <span class="mandatory"></span>
                                                </label>
                                                <div *ngIf="isReadOnly" class="disable-text pre-text">{{ account.name ? account.name : '&nbsp;' }}</div>
                                                <input #accountTxtName *ngIf="!isReadOnly" id="txt-name" type="text"
                                                    class="form-control" formControlName="name"
                                                    [(ngModel)]="account.name"
                                                    [ngClass]="{ 'is-invalid': accountfrm.name.errors && (accountfrm.name.dirty || accountfrm.name.touched) }"
                                                    trimValue>
                                                <div *ngFor='let validation of accountValidationMessages.name'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.name.hasError(validation.type) && accountfrm.name.errors && (accountfrm.name.dirty || accountfrm.name.touched)'
                                                        id="errorNameIsRequired">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>
                                                    {{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.LEGALNAME' | translate }}
                                                </label>
                                                <div *ngIf="isReadOnly" class="disable-text pre-text">{{ account.legalName ? account.legalName : '&nbsp;' }}</div>
                                                <input *ngIf="!isReadOnly" id="txt-legalName" type="text"
                                                    class="form-control" formControlName="legalName"
                                                    [(ngModel)]="account.legalName"
                                                    [ngClass]="{ 'is-invalid': accountfrm.legalName.errors && (accountfrm.legalName.dirty || accountfrm.legalName.touched) }"
                                                    trimValue>
                                                <div *ngFor='let validation of accountValidationMessages.legalName'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.legalName.hasError(validation.type) && accountfrm.legalName.errors && (accountfrm.legalName.dirty || accountfrm.legalName.touched)'
                                                        id="errorLeagalNameIsRequired">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.EMAIL' | translate}}</label>
                                                <div class="disable-text" *ngIf="isReadOnly">
                                                    <a class="dark-blue font-weight-bold no-underline cursor-pointer" id="link-email"
                                                        href="mailto:{{account.email}}">
                                                        {{ account.email ? account.email : '' }}
                                                    </a>
                                                </div>
                                                <input *ngIf="!isReadOnly" id="txt-email" type="email"
                                                    class="form-control" formControlName="email"
                                                    [(ngModel)]="account.email" trimValue
                                                    [ngClass]="{ 'is-invalid': accountfrm.email.errors && (accountfrm.email.dirty || accountfrm.email.touched)}">
                                                <div *ngFor='let validation of accountValidationMessages.email'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.email.hasError(validation.type) && accountfrm.email.errors && (accountfrm.email.dirty || accountfrm.email.touched)'
                                                        id="errorEmailMustBeValidEmailAddress">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.EMAIL2' | translate}}</label>
                                                <div class="disable-text" *ngIf="isReadOnly">
                                                    <a class="dark-blue font-weight-bold no-underline cursor-pointer" id="link-email2"
                                                        href="mailto:{{account.email2}}">
                                                        {{ account.email2 ? account.email2 : '' }}
                                                    </a>
                                                </div>
                                                <input *ngIf="!isReadOnly" id="txt-email2" type="email"
                                                    class="form-control" formControlName="email2"
                                                    [(ngModel)]="account.email2" trimValue
                                                    [ngClass]="{ 'is-invalid': accountfrm.email2.errors && (accountfrm.email2.dirty || accountfrm.email2.touched)}">
                                                <div *ngFor='let validation of accountValidationMessages.email2'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.email2.hasError(validation.type) && accountfrm.email2.errors && (accountfrm.email2.dirty || accountfrm.email2.touched)'
                                                        id="errorEmailMustBeValidEmailAddress">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label> {{'CRM.CONTACT.DETAIL.TAB_DETAILS.PHONE' | translate}} </label>
                                                <div *ngIf="isReadOnly" class="disable-text">
                                                    <a *ngIf="account.phone else blankphone" id="link-phone"
                                                        class="dark-blue font-weight-bold no-underline cursor-pointer"
                                                        [href]="account.phone | phone: 'link'">
                                                        {{account.countryCode}} {{ account.phoneNumber | mask: account['phoneMask'] }}
                                                    </a>
                                                    <ng-template #blankphone>
                                                        <div>&nbsp;</div>
                                                    </ng-template>
                                                </div>
                                                <div *ngIf="!isReadOnly">
                                                    <ngx-phone-control  formControlName="phone"></ngx-phone-control>
                                                    <div *ngFor='let validation of accountValidationMessages.phone'
                                                        class='invalid-feedback'>
                                                        <div *ngIf='accountfrm.phone.hasError(validation.type) && submitted && accountfrm.phone.errors'
                                                            id="errorPhoneMustBeValidPhoneNumber">
                                                            {{ validation.message | translate }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>
                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.NUMBER_OF_EMPLOYEES' | translate}}
                                                </label>
                                                <div *ngIf="isReadOnly" class="disable-text">
                                                    {{ account.numberOfEmployees ? account.numberOfEmployees : '&nbsp;'
                                                    }}
                                                </div>
                                                <input *ngIf="!isReadOnly" id="num-numOfEmp" type="number"
                                                    class="form-control" formControlName="numberOfEmployees"
                                                    [(ngModel)]="account.numberOfEmployees"
                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.numberOfEmployees.errors }">
                                                <div *ngFor='let validation of accountValidationMessages.numberOfEmployees'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.numberOfEmployees.hasError(validation.type) && submitted && accountfrm.numberOfEmployees.errors'
                                                        id="errorNameIsRequired">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>
                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.EIN' | translate}}
                                                </label>
                                                <div *ngIf="isReadOnly" class="disable-text">
                                                    {{ account.ein != null ?
                                                    (account.ein | mask: _commonHelper.globalInputEinFormate)
                                                    : '&nbsp;'
                                                    }}
                                                </div>
                                                <input *ngIf="!isReadOnly" id="num-numOfEmp" type="text"
                                                    class="form-control" formControlName="ein" [(ngModel)]="account.ein"
                                                    [mask]="_commonHelper.globalInputEinFormate" maxlength='10'
                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.ein.errors }">
                                                <div *ngFor='let validation of accountValidationMessages.ein'
                                                    class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.ein.hasError(validation.type) && submitted && accountfrm.ein.errors'
                                                        id="errorNameIsRequired">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>

                                            <div *ngIf="isEntityWorkflow" class='col-md-6 col-sm-6 form-group'>
                                                <label>{{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.ASSIGNED_TO' | translate
                                                    }}</label>
                                                    <ng-container *ngIf="isReadOnly; else templateDrpAssignedTo">
                                                        <div  class="disable-text">
                                                            {{
                                                            account.assignedToName != null &&
                                                            account.assignedToName != '' ?
                                                            account.assignedToName : ''
                                                            }}
                                                        </div>
                                                    </ng-container>
                                                    <ng-template #templateDrpAssignedTo>

                                                        <!-- Assigned To Loading Bar -->
                                                        <ngx-control-level-loading-bar *ngIf="showAssignedToLoader"></ngx-control-level-loading-bar>

                                                        <p-dropdown *ngIf="!isReadOnly" id="drp-assignedToIDs"
                                                            [placeholder]="('CRM.ACCOUNT.DETAIL.TAB_DETAILS.FILTER_PLACEHOLDER_ASSIGNED_TO' | translate)"
                                                            class="form-control" [options]="assignedToUsers" formControlName="assignedTo" [(ngModel)]="account.assignedTo"
                                                            [filter]="true" (onFilter)="assignedToOnFilter($event)" (onChange)="assignedToOnChange($event)"
                                                            [showClear]="true" [resetFilterOnHide]="false">
                                                        </p-dropdown>
                                                    </ng-template>
                                            </div>
                                            
                                        </div>
                                        <div class="row">
                                            
                                            <div class="col-md-6 col-sm-6 form-group" *ngIf="isEntityWorkflow && !isListViewLayout">
                                                <!-- stage task start -->
                                                <label>{{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.TASKS' | translate }}</label>
                                                <div *ngIf="isReadOnly && currentStageTask != null"
                                                    class="disable-text">
                                                    {{
                                                    currentStageTask && currentStageTask.length > 0
                                                    ? (account.selectedStageTaskIds?.length ?? 0) + ' of ' +
                                                    currentStageTask.length + '
                                                    completed' : ''
                                                    }}

                                                </div>
                                                <div *ngIf="isReadOnly && (currentStageTask == undefined || currentStageTask == null)"
                                                    class="disable-text">
                                                    {{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.NO_TASKS' | translate }}
                                                </div>

                                                <div *ngIf="!isReadOnly && currentStageTask != null"
                                                    class="input-group entity-dropdown custom-dropdown-muliselect">
                                                    <p-multiSelect [options]="currentStageTask" id="drp-stage-task"
                                                        class="entity-multiSelect" optionLabel="name"
                                                        formControlName="selectedStageTaskIds"
                                                        [(ngModel)]="account.selectedStageTaskIds"
                                                        [maxSelectedLabels]="500" [showToggleAll]="false"
                                                        [filter]="false" [showHeader]="false"
                                                        [displaySelectedLabel]='false'
                                                        [defaultLabel]="currentStageTask && currentStageTask.length > 0
                                                    ? (account.selectedStageTaskIds?.length ?? 0) + ' of ' + currentStageTask.length + ' completed' : ''">
                                                    </p-multiSelect>
                                                </div>
                                                <div class="min-height-38px disable-text"
                                                    *ngIf="!isReadOnly && (currentStageTask == null || currentStageTask == '')">
                                                    {{ 'CRM.ACCOUNT.DETAIL.TAB_DETAILS.NO_TASKS' | translate }}
                                                </div>
                                                <!-- stage task end -->
                                            </div>
                                                <div class='col-md-6 col-sm-6 form-group' *ngIf="isEntityWorkflow && isListViewLayout">
                                                    <label>{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.STATUS' | translate}} <span class="mandatory"></span></label>
                                                    <div class="disable-text" *ngIf="isReadOnly">
                                                        {{ (accountStages | displayValueFinder: {id:account.entityStageId})?.length
                                                        ?
                                                        (accountStages | displayValueFinder: {id:account.entityStageId})[0].name : ' ' }}
                                                    </div>
                                                    <p-dropdown *ngIf="!isReadOnly" id="drp-stageId" class="form-control" formControlName="entityStageId"
                                                        [filter]="true" [resetFilterOnHide]="false" [options]="accountStages"
                                                        placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.STATUS_PLACEHOLDER' | translate}}" optionLabel="name"
                                                        optionValue="id" [(ngModel)]="account.entityStageId"
                                                        [ngClass]="{ 'is-invalid': submitted && accountfrm.entityStageId.errors }">
                                                    </p-dropdown>
                                                    <div *ngFor='let validation of accountValidationMessages.entityStageId' class='invalid-feedback'>
                                                        <div *ngIf='accountfrm.entityStageId.hasError(validation.type) && submitted && accountfrm.entityStageId.errors'
                                                            id="errorStageIsRequired">
                                                            {{ validation.message | translate }}
                                                        </div>
                                                    </div>
                                                </div>
                                            <div class='col-md-6 col-sm-6 form-group'>
                                                <label>{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.TYPE' | translate}} <span class="mandatory"></span></label>
                                                <div class="disable-text" *ngIf="isReadOnly">
                                                    {{ (accountTypes | displayValueFinder: {intValue1:account.typeId})?.length
                                                    ?
                                                    ( accountTypes | displayValueFinder: {intValue1:account.typeId})[0].name : ' ' }}
                                                </div>
                                                <p-dropdown *ngIf="!isReadOnly" id="drp-typeId" class="form-control" formControlName="typeId" [filter]="true" [resetFilterOnHide]="false" [showClear]="true"
                                                    [options]="accountTypes" placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.TYPE_PLACEHOLDER' | translate}}" 
                                                    optionLabel="name" optionValue="intValue1" [(ngModel)]="account.typeId"
                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.typeId.errors }">
                                                </p-dropdown>
                                                <div *ngFor='let validation of accountValidationMessages.typeId' class='invalid-feedback'>
                                                    <div *ngIf='accountfrm.typeId.hasError(validation.type) && submitted && accountfrm.typeId.errors' id="errorTypeIsRequired">
                                                        {{ validation.message | translate }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- start BillingAddress -->
                                    <div class="col-lg-6 pr-lg-1">
                                        <div class="card border-0 m-0 pr-lg-2">
                                            <div class="card-header btn-card-edit  pt-0">
                                                {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.TITLE' |
                                                translate}}
                                            </div>
                                            <div class='card-body' formGroupName="billingAddress">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class='row'>
                                                            <div class='col-md-12 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.ADDRESS' | translate}}</label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.billingAddress.address1 != null
                                                                    &&
                                                                    account.billingAddress.address1 != ''
                                                                    ?
                                                                    account.billingAddress.address1 : ' '
                                                                    }}

                                                                    {{
                                                                    account.billingAddress.address2 != null
                                                                    &&
                                                                    account.billingAddress.address2 != '' ?
                                                                    ", " +
                                                                    account.billingAddress.address2 : ' '
                                                                    }}
                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-address1"
                                                                    class="form-control"
                                                                    formControlName="address1"
                                                                    [(ngModel)]="account.billingAddress.address1"
                                                                    autocomplete="off" maxlength="200" 
                                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.billingAddress.get('address1').errors }" trimValue
                                                                    (input)="onAddressChangeValidation(accountfrm.billingAddress, 1)">
                                                                <div *ngFor='let validation of accountValidationMessages.billingAddress' class='invalid-feedback'>
                                                                    <div *ngIf="accountfrm.billingAddress.get('address1').hasError(validation.type) && submitted && accountfrm.billingAddress.get('address1').errors" id="errorBillingAddressRequired">
                                                                        {{ validation.message | translate }}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-md-12'>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-address2"
                                                                    class="form-control mb-3" formControlName="address2"
                                                                    [(ngModel)]="account.billingAddress.address2"
                                                                    autocomplete="off" maxlength="200" trimValue>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.CITY' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.billingAddress.city != null
                                                                    &&
                                                                    account.billingAddress.city != ''
                                                                    ?
                                                                    account.billingAddress.city : ' '
                                                                    }}
                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-city"
                                                                    class="form-control" formControlName="city"
                                                                    [(ngModel)]="account.billingAddress.city"
                                                                    autocomplete="off" maxlength="100" trimValue
                                                                    (input)="onAddressChangeValidation(accountfrm.billingAddress, 1)">
                                                            </div>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.STATE' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{ (billingStates | displayValueFinder:
                                                                    {value:account.billingAddress.stateId})?.length
                                                                    ?
                                                                    ( billingStates | displayValueFinder:
                                                                    {value:account.billingAddress.stateId})[0].label
                                                                    :' ' }}
                                                                </div>

                                                                <!-- State Loading Bar -->
                                                                <ngx-control-level-loading-bar *ngIf="!isReadOnly && showBillingStateLoader"></ngx-control-level-loading-bar>
                                                                 
                                                                <p-dropdown *ngIf="!isReadOnly" id="drp-state"
                                                                    [(ngModel)]="account.billingAddress.stateId"
                                                                    class="form-control" formControlName="stateId"
                                                                    [filter]="true" [resetFilterOnHide]="false"
                                                                    [showClear]="true" [options]="billingStates"
                                                                    placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.STATE_PLACEHOLDER' | translate}}"
                                                                    optionLabel="label" optionValue="value"
                                                                    (onChange)="onAddressChangeValidation(accountfrm.billingAddress, 1)">
                                                                </p-dropdown>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.ZIPCODE' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.billingAddress.postalCode != null
                                                                    &&
                                                                    account.billingAddress.postalCode != ''
                                                                    ?
                                                                    account.billingAddress.postalCode : ' '
                                                                    }}
                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text"
                                                                    id="txt-postal-code" class="form-control"
                                                                    formControlName="postalCode"
                                                                    [mask]="_commonHelper.globalInputPostalCodeFormate"
                                                                    [dropSpecialCharacters]="false"
                                                                    [(ngModel)]="account.billingAddress.postalCode"
                                                                    autocomplete="off" maxlength="10"
                                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.billingAddress.get('postalCode').errors }"
                                                                    (input)="onAddressChangeValidation(accountfrm.billingAddress, 1)">
                                                                <div *ngFor='let validation of accountValidationMessages.billingPostalCode'
                                                                    class='invalid-feedback'>
                                                                    <div *ngIf="accountfrm.billingAddress.get('postalCode').hasError(validation.type) && submitted && accountfrm.billingAddress.get('postalCode').errors"
                                                                        id="errorEmailMustBeValidEmailAddress">
                                                                        {{ validation.message | translate }}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.COUNTRY' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{ (countries | displayValueFinder:
                                                                    {id:accountfrm.billingAddress.get('countryId').value})?.length
                                                                    ?
                                                                    ( countries | displayValueFinder:
                                                                    {id:accountfrm.billingAddress.get('countryId').value})[0].name
                                                                    :' ' }}
                                                                </div>
                                                                <p-dropdown *ngIf="!isReadOnly" id="drp-country"
                                                                    [(ngModel)]="account.billingAddress.countryId"
                                                                    class="form-control" formControlName="countryId"
                                                                    [filter]="true" [resetFilterOnHide]="false"
                                                                    [showClear]="false" [options]="countries"
                                                                    placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.BILLING_ADDRESS_INFO.COUNTRY_PLACEHOLDER' | translate}}"
                                                                    optionLabel="name" optionValue="id"
                                                                    (onChange)="onBillingCountrySelectionChange($event.value, accountfrm.billingAddress)">
                                                                </p-dropdown>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- end BillingAddress -->

                                    <!-- Shipping Address Start -->
                                    <div class="col-lg-6">
                                        <div class="card border-0 m-0 pl-lg-0">
                                            <div class="card-header btn-card-edit  pt-0">
                                                {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.TITLE' |
                                                translate}}
                                            </div>
                                            <div class='card-body' formGroupName="shippingAddress">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class='row'>
                                                            <div class='col-md-12 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.ADDRESS' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.shippingAddress.address1 != null
                                                                    &&
                                                                    account.shippingAddress.address1 != ''
                                                                    ?
                                                                    account.shippingAddress.address1 : ' '
                                                                    }}
                                                                    {{
                                                                    account.shippingAddress.address2 != null
                                                                    &&
                                                                    account.shippingAddress.address2 != ''
                                                                    ?
                                                                    ", " + account.shippingAddress.address2 : ' '
                                                                    }}

                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-shippingAddress1"
                                                                    class="form-control" formControlName="address1"
                                                                    [(ngModel)]="account.shippingAddress.address1"
                                                                    autocomplete="off" maxlength="200"
                                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.shippingAddress.get('address1').errors }" trimValue
                                                                    (input)="onAddressChangeValidation(accountfrm.shippingAddress, 2)">
                                                                <div *ngFor='let validation of accountValidationMessages.shippingAddress' class='invalid-feedback'>
                                                                    <div *ngIf="accountfrm.shippingAddress.get('address1').hasError(validation.type) && submitted && accountfrm.shippingAddress.get('address1').errors" id="errorShippingAddressRequired">
                                                                        {{ validation.message | translate }}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-md-12'>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-shippingAddress2"
                                                                    class="form-control mb-3" formControlName="address2"
                                                                    [(ngModel)]="account.shippingAddress.address2"
                                                                    autocomplete="off" maxlength="200" trimValue>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.CITY' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.shippingAddress.city != null
                                                                    &&
                                                                    account.shippingAddress.city != ''
                                                                    ?
                                                                    account.shippingAddress.city : ' '
                                                                    }}
                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text" id="txt-shippingCity"
                                                                    class="form-control" formControlName="city"
                                                                    [(ngModel)]="account.shippingAddress.city"
                                                                    autocomplete="off" maxlength="100" trimValue
                                                                    (input)="onAddressChangeValidation(accountfrm.shippingAddress, 2)">
                                                            </div>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.STATE' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{ (shippingStates | displayValueFinder:
                                                                    {value:account.shippingAddress.stateId})?.length
                                                                    ?
                                                                    ( shippingStates | displayValueFinder:
                                                                    {value:account.shippingAddress.stateId})[0].label
                                                                    :' ' }}
                                                                </div>
                                                                <!-- State Loading Bar -->
                                                                <ngx-control-level-loading-bar *ngIf="!isReadOnly && showShippingStateLoader"></ngx-control-level-loading-bar>

                                                                <p-dropdown *ngIf="!isReadOnly" id="drp-shippingState"
                                                                    [(ngModel)]="account.shippingAddress.stateId"
                                                                    class="form-control" formControlName="stateId"
                                                                    [filter]="true" [resetFilterOnHide]="false"
                                                                    [showClear]="true" [options]="shippingStates"
                                                                    placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.STATE_PLACEHOLDER' | translate}}"
                                                                    optionLabel="label" optionValue="value"
                                                                    (onChange)="onAddressChangeValidation(accountfrm.shippingAddress, 2)">
                                                                </p-dropdown>
                                                            </div>
                                                        </div>
                                                        <div class='row'>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.ZIPCODE' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{
                                                                    account.shippingAddress.postalCode != null
                                                                    &&
                                                                    account.shippingAddress.postalCode != ''
                                                                    ?
                                                                    account.shippingAddress.postalCode : ' '
                                                                    }}
                                                                </div>
                                                                <input *ngIf="!isReadOnly" type="text"
                                                                    id="txt-shippingPostal-code" class="form-control"
                                                                    formControlName="postalCode"
                                                                    [mask]="_commonHelper.globalInputPostalCodeFormate"
                                                                    [dropSpecialCharacters]="false"
                                                                    [(ngModel)]="account.shippingAddress.postalCode"
                                                                    autocomplete="off" maxlength="10"
                                                                    [ngClass]="{ 'is-invalid': submitted && accountfrm.shippingAddress.get('postalCode').errors }"
                                                                    (input)="onAddressChangeValidation(accountfrm.shippingAddress, 2)">
                                                                <div *ngFor='let validation of accountValidationMessages.shippingPostalCode'
                                                                    class='invalid-feedback'>
                                                                    <div *ngIf="accountfrm.shippingAddress.get('postalCode').hasError(validation.type) && submitted && accountfrm.shippingAddress.get('postalCode').errors"
                                                                        id="errorEmailMustBeValidEmailAddress">
                                                                        {{ validation.message | translate }}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class='col-sm-6 form-group'>
                                                                <label>
                                                                    {{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.COUNTRY' | translate}}
                                                                </label>
                                                                <div class="disable-text" *ngIf="isReadOnly">
                                                                    {{ (countries | displayValueFinder:
                                                                    {id:accountfrm.shippingAddress.get('countryId').value})?.length
                                                                    ?
                                                                    ( countries | displayValueFinder:
                                                                    {id:accountfrm.shippingAddress.get('countryId').value})[0].name
                                                                    :' ' }}
                                                                </div>
                                                                <p-dropdown *ngIf="!isReadOnly" id="drp-shippingCountry"
                                                                    [(ngModel)]="account.shippingAddress.countryId"
                                                                    class="form-control" formControlName="countryId"
                                                                    [filter]="true" [resetFilterOnHide]="false"
                                                                    [showClear]="false" [options]="countries"
                                                                    placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_DETAILS.SHIPPING_ADDRESS_INFO.COUNTRY_PLACEHOLDER' | translate}}"
                                                                    optionLabel="name" optionValue="id"
                                                                    (onChange)="onShippingCountrySelectionChange($event.value, accountfrm.shippingAddress)">
                                                                </p-dropdown>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Shipping AddressEnd -->
                                </div>
                            </div>
                            <!-- Details End-->

                            <ng-container *ngIf="entityRelationComponents.length > 0">
                                
                                <div class="tab-pane fade p-3 search-wrapper"
                                    [ngClass]="selectedTab == (tab.tabLink | removeWhiteSpace) ? 'show active' : ''"
                                    *ngFor="let tab of entityRelationTabs; let i = index" id="{{ tab.tabLink | removeWhiteSpace }}"
                                    role="tabpanel">
                                    <div class="table-responsive">
                                        <ng-container *ngIf="tab.isTabLoaded">
                                            <ngx-entity-relation [entityRelationComponent]="entityRelationComponents[i]" [entityId]="accountId"
                                                [entityTypeId]="entityTypeId" [isShowToEntityAndAddEntity]="account.isActive && !account.isPaused"></ngx-entity-relation>
                                        </ng-container>
                                    </div>
                                </div>
                            </ng-container>
                            
                            <!-- Custom Start-->
                            <div class="tab-pane fade px-0 pt-0" [ngClass]="selectedTab == ('nav' + tab.tabName | removeWhiteSpace) ? 'show active' : ''"
                                *ngFor="let tab of formDataJSON; let i = index" id="{{ 'nav' + tab.tabName | removeWhiteSpace }}"
                                role="tabpanel" aria-labelledby="navCustom-tab" name="navCustom">
                                <!-- Section Start-->
                                <div class='card border-0 m-0 pt-md-0 pt-3'
                                    *ngFor="let section of tab.sections; let j = index">
                                    <div class="card-header btn-card-edit py-0">
                                        <span *ngIf="section.sectionName" class="vertical-center py-md-3 pt-0 pb-3 line-height-1">
                                            {{ section.sectionName }}
                                        </span>
                                    </div>
                                    <div class='card-body'>
                                        <div class='row'>
                                            <ngx-custom-field 
                                                [formGroup]="accountForm" 
                                                [section]="section" 
                                                [controls]="section.controls" 
                                                [refreshFieldJSONGrid]="refreshCustomFieldJSONGrid"
                                                [customFieldJSONData]="account.customFieldJSONData" 
                                                [isReadOnly]="isReadOnly" 
                                                [submitted]="submitted" 
                                                [refreshTabularDataSource]="refreshCustomFieldDatasource"
                                                [currencySymbol]="currencySymbol" 
                                                [entityID]="accountId" 
                                                [entityTypeID]="entityTypeId" 
                                                [entityRecordTypeID]="entityRecordTypeId"
                                                [phoneReadOnlyMask]="phoneReadOnlyMaskForCustomField">
                                            </ngx-custom-field>
                                        </div>
                                    </div>
                                </div>
                                <!-- Section End-->
                            </div>
                            <!-- Custom End-->

                            <!-- Work Tasks Start-->
                            <div class="tab-pane fade p-3 search-wrapper" id="navWorkTasks" role="tabpanel"
                                [ngClass]="selectedTab == 'navWorkTasks' ? 'show active' : ''" aria-labelledby="navWorkTasks-tab"
                                name="navWorkTasks">
                                <div class="mb-3 vertical-center justify-content-end dropdown-with-add" *ngIf="isEditAccount && isAddWorkTask && account.isActive && !account.isPaused">
                                    <button *ngIf="onceWorkTaskClicked" type="button" id="btn-add-workTask" class="btn btn-primary ml-3"
                                        (click)="addWorkTask()">
                                        <i *ngIf="workTaskSubTypeDetails?.iconClass" class="{{workTaskSubTypeDetails?.iconClass}} mr-1"
                                            aria-hidden="true"></i>
                                        {{('CRM.ACCOUNT.DETAIL.TAB_WORKTASKS.ADD_WORKTASK_PREFIX' | translate) + " " +
                                        workTaskSubTypeDetails?.name}}
                                    </button>
                                </div>
                                <div class="expandable-card">
                                    <ng-container *ngIf="onceWorkTaskClicked">
                                        <ngx-work-task-expandable-table [entityID]="accountId" [entityTypeID]="entityTypeId" [refresh]="refreshWorkTaskTab"
                                            [isEntityActive]="account.isActive && !account.isPaused"></ngx-work-task-expandable-table>
                                    </ng-container>
                                </div>
                            </div>
                            <!-- Work Tasks End-->

                            <!-- Related Opportunities Start-->
                            <div class="tab-pane fade p-3 search-wrapper" id="navRelatedOpportunities" role="tabpanel" [ngClass]="selectedTab == 'navRelatedOpportunities' ? 'show active' : ''"
                                aria-labelledby="navRelatedOpportunities-tab" name="navRelatedOpportunities">
                                <div *ngIf="isEditAccount && isAddOpportunity && account.isActive && !account?.isPaused"
                                    class="mb-3 vertical-center justify-content-end dropdown-with-add">
                                    <ngx-control-level-loading-bar *ngIf="isShowLoaderForOpportunity"></ngx-control-level-loading-bar>
                                    <div>
                                        <button *ngIf="onceRelatedOpportunitiesClicked" type="button" id="btn-add-opportunity"
                                            class="btn btn-primary ml-3" (click)="addOpportunity()">
                                            <i class="fas fa-hand-holding-usd me-1" aria-hidden="true"></i>
                                            {{ 'OPPORTUNITIES.ADD_DIALOG.TITLE' | translate | configuredEntityName }}
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <ng-container *ngIf="onceRelatedOpportunitiesClicked">
                                        <app-dynamic-table 
                                            *ngIf="!refreshOpporunityTab; else refreshChildComponentForOpportunity()"
                                            [code]="'ENTITY_OPPORTUNITIES'" 
                                            [parameters]="tbRelatedOpportunitiesParameters"
                                            (onDeleteClick)="deleteOpportunity($event)">
                                        </app-dynamic-table>
                                    </ng-container>
                                </div>
                            </div>
                            <!-- Related Opportunities End-->

                            <!-- Related cases Start-->
                            <div class="tab-pane fade p-3 search-wrapper" id="navRelatedCases" role="tabpanel" [ngClass]="selectedTab == 'navRelatedCases' ? 'show active' : ''"
                                aria-labelledby="navRelatedCases-tab" name="navRelatedCases">
                                <div *ngIf="isEditAccount && isAddCase && account.isActive && !account?.isPaused"
                                    class="mb-3 vertical-center justify-content-end dropdown-with-add">
                                    <ngx-control-level-loading-bar *ngIf="isShowLoaderForCase"></ngx-control-level-loading-bar>
                                    <div>
                                        <button *ngIf="onceRelatedCasesClicked" type="button" id="btn-add-case"
                                            class="btn btn-primary ml-3" (click)="addCase()">
                                            <i class="fa-solid fa-file-invoice me-1" aria-hidden="true"></i>
                                            {{ 'CASES.ADD_DIALOG.TITLE' | translate | configuredEntityName }}
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <ng-container *ngIf="onceRelatedCasesClicked">
                                        <app-dynamic-table 
                                            *ngIf="!refreshCaseTab; else refreshChildComponent('RelatedCases')"
                                            [code]="'ENTITY_CASES'" 
                                            [parameters]="tbRelatedCasesParameters"
                                            (onDeleteClick)="deleteCase($event)"
                                            [entityHiddenFieldSettings]="entityHiddenFieldSettings"
                                            [parentEntityTypeId]="entityTypeId"
                                            [sectionCodes]="sectionCodeName.EntityCaseColumn">
                                        </app-dynamic-table>
                                    </ng-container>
                                </div>
                            </div>
                            <!-- Related cases End-->

                            <!-- Related Contact list Start-->
                            <!-- <div class="tab-pane fade p-3 search-wrapper" id="navContacts" role="tabpanel" [ngClass]="selectedTab == 'navContacts' ? 'show active' : ''"
                                aria-labelledby="navContacts-tab" name="navRelatedContacts">
                                <div *ngIf="isEditAccount && account.isActive && !account.isPaused"
                                    class="mb-3 vertical-center justify-content-end dropdown-with-add">
                                    <div>
                                        <ngx-control-level-loading-bar *ngIf="isShowLoaderForAccountContact"></ngx-control-level-loading-bar>
                                        <p-dropdown #relatedContactDrp id="drp-relatedContact" [options]="contactsForAccountContacts" [filter]="true"
                                            [resetFilterOnHide]="false" [showClear]="true" [(ngModel)]="selectedContact"
                                            [ngModelOptions]="{standalone: true}" class="form-control static-dropdown-width text-left mb-0"
                                            placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_RELATEDCONTACT.ADD_RELATEDCONTACTS_PLACEHOLDER' | translate| configuredEntityName}}"
                                            (onFilter)="relatedContactsOnFilter($event)" (onChange)="relatedContactsOnChange($event)" optionLabel="name"
                                            optionValue="id">
                                            <ng-template let-entity pTemplate="item">
                                                <div class="entity-pad pl-0">
                                                    <div class="font-semibold">
                                                        {{entity.type ? (entity.name + ' ('+ entity.type+')') :
                                                        entity.name}}
                                                    </div>
                                                    <div class="d-flex align-items-end justify-content-between">
                                                        <span *ngIf="entity.email != null && entity.email != ''" class="email-dropdown-width mt-1">
                                                            <span class="d-flex align-items-end mr-2 font-12 w-100">
                                                                <i class="dark-grey far fa-envelope mr-1 h-14px" aria-hidden="true"></i>
                                                                <span class="w-email-label">{{entity.email}}</span>
                                                            </span>
                                                        </span>

                                                        <span *ngIf="entity.phone != null && entity.phone != ''"
                                                            class="d-flex align-items-end font-12 phone-dropdown-width mt-1">
                                                            <i class="dark-grey fas fa-phone-alt mr-1 h-14px" aria-hidden="true"></i>
                                                            <span>{{ entity.phone | phone | mask:_commonHelper.globalPhoneFormate }}</span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-dropdown>
                                    </div>
                                    <button *ngIf="isAddContacts" type="button" id="btn-add-relatedContact"
                                        class="btn btn-primary ml-3" (click)="addRelatedContact()">
                                        <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="table-responsive">
                                    <ng-container *ngIf="onceContactClicked">
                                        <app-dynamic-table
                                            *ngIf="!refreshRelatedContacts; else refreshChildComponent('RelatedContacts')"
                                            [code]="'ACCOUNT_RELATED_CONTACTS'" [parameters]="tbContactParameters"
                                            (onDeleteClick)="deleteRelatedContact($event)">
                                        </app-dynamic-table>
                                    </ng-container>
                                </div>
                            </div> -->
                            <!-- Related Contact list End-->

                            <!-- Related Product list Start-->
                            <!-- <div class="tab-pane fade p-3 search-wrapper" id="navProducts" role="tabpanel" [ngClass]="selectedTab == 'navProducts' ? 'show active' : ''"
                              aria-labelledby="navProducts-tab" name="navRelatedProducts">
                              <div *ngIf="isEditAccount && account.isActive && !account.isPaused"
                                  class="mb-3 vertical-center justify-content-end dropdown-with-add">
                                <div>
                                    <ngx-control-level-loading-bar *ngIf="isShowLoaderForProduct"></ngx-control-level-loading-bar>
                                    <p-dropdown #relatedProductDrp id="drp-relatedProduct" [options]="productsForAccountProducts" [filter]="true"
                                        [resetFilterOnHide]="false" [showClear]="true" [(ngModel)]="selectedProduct"
                                        [ngModelOptions]="{standalone: true}" class="form-control static-dropdown-width text-left mb-0"
                                        placeholder="{{'CRM.ACCOUNT.DETAIL.TAB_RELATEDPRODUCT.ADD_RELATEDPRODUCTS_PLACEHOLDER' | translate | configuredEntityName}}"
                                        (onFilter)="relatedProductsOnFilter($event)" (onChange)="relatedProductsOnChange($event)" optionLabel="name"
                                        optionValue="id">
                                    </p-dropdown>
                                </div>
                                  <button *ngIf="isAddProducts" type="button" id="btn-add-relatedProduct"
                                      class="btn btn-primary ml-3" (click)="addRelatedProduct()">
                                      <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                  </button>
                              </div>
                              <div class="table-responsive">
                                  <ng-container *ngIf="onceProductClicked">
                                      <app-dynamic-table
                                          *ngIf="!refreshRelatedProducts; else refreshChildComponent('RelatedProducts')"
                                          [code]="'ACCOUNT_RELATED_PRODUCTS'" [parameters]="tblProductParameters"
                                          (onDeleteClick)="deleteRelatedProduct($event)"
                                          (onEditClick)="editRelatedProduct($event)"
                                          (data)="accountProductsList($event)">
                                      </app-dynamic-table>
                                  </ng-container>
                              </div>
                            </div> -->
                            <!-- Related Product list End-->

                            <!-- Stage/Pause history Start-->
                            <div class="tab-pane fade" id="navHistory" role="tabpanel" [ngClass]="selectedTab == 'navHistory' ? 'show active' : ''"
                                aria-labelledby="navHistory-tab" name="navHistory">
                                <ng-container *ngIf="onceStageHistoryClicked">
                                    <ngx-history-tab 
                                    [entityWorkflowId]="entityWorkflowId" 
                                    [entityTypeId]="entityTypeId" 
                                    [entityId]="accountId" 
                                    [hoursInDay]="hoursInDay" 
                                    [refreshStageHistory]="refreshStageHistory" 
                                    [refreshActivityHistory]="refreshActivityHistory" 
                                    [isListViewLayout]="isListViewLayout">
                                </ngx-history-tab>
                                </ng-container>
                            </div>
                            <!-- Stage/Pause history End-->

                            <!-- Attachment Tab Start -->
                            <ng-container *ngIf="isShowAttachmentTab">
                                    <div class="tab-pane fade p-3" id="navAttachment" role="tabpanel" [ngClass]="selectedTab == 'navAttachment' ? 'show active' : ''"
                                        aria-labelledby="navAttachment-tab" name="navAttachment">
                                        <ng-container *ngIf="onceAttachmentClicked">
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">941s</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'941s'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordType941sId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"                                                            
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_941_FILES'" [dynamicTableParamList]="dynamic941sParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">Payroll</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'Payroll'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordTypePayrollId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)" class="tbl-heritage-payroll"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_PAYROLL_FILES'" [dynamicTableParamList]="dynamicPayrollParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">Other</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'Other'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordTypeOthersId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_OTHER_FILES'" [dynamicTableParamList]="dynamicOtherParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">941x</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'941x'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordType941xId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_941X_FILES'" [dynamicTableParamList]="dynamic941xParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">PPP</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'PPP'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordTypePPPId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_PPP_FILES'" [dynamicTableParamList]="dynamicPPPParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">Converted Payroll</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'Converted Payroll'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordTypeConvertedPayrollId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_CONVERTED_PAYROLL_FILES'" [dynamicTableParamList]="dynamicConvertedPayrollParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card border-0 m-0 pt-md-0 pt-3 px-0">
                                                <div class="card-header btn-card-edit py-0">
                                                    <span class="vertical-center pb-md-3 pt-0 pb-3 line-height-1">P & L</span>
                                                </div>
                                                <div class='card-body search-wrapper'>
                                                    <div class='row'>
                                                        <ngx-file-upload-custom-field [documentType]="'P & L'" [entityId]="accountId"
                                                            [entityRecordTypeId]="recordTypePLId" [parentEntityTypeId]="entityTypeId"
                                                            (refreshDocuments)="refreshDocuments($event)"
                                                            [isShowAddFileButton]="isEditAccount && account.isActive && !account.isPaused"
                                                            [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                                            [dynamicTableCode]="'HERITAGE_P_AND_L_FILES'" [dynamicTableParamList]="dynamicPLParamList">
                                                        </ngx-file-upload-custom-field>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                <!-- Attachment Tab End -->
                            </ng-container>
                            
                            <!-- Document Start-->
                            <div class="tab-pane fade p-3 search-wrapper" id="navDocuments" role="tabpanel"
                                [ngClass]="selectedTab == 'navDocuments' ? 'show active' : ''" aria-labelledby="navDocuments-tab"
                                name="navDocuments">
                                <ng-container *ngIf="onceDocumentClicked">
                                    <ngx-entity-documents [entityID]="accountId" class="entity-documents" [entityTypeID]="entityTypeId"
                                        [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                                        [isEditPermission]="isEditAccount && account.isActive && !account.isPaused"
                                        [refreshFromParent]="refreshActivityHistory" (refreshDocuments)="setRefreshDocument()">
                                    </ngx-entity-documents>
                                </ng-container>
                            </div>
                            <!-- Document End-->
                        </div>


                    </form>
                    <!-- Tab Content END -->
                    <div *ngIf="isAdditionalTab">
                        <!-- Tab Additional here -->
                        <ng-container>
                            <ngx-globle-nav-tab [isNativeTab]="isNativeTab" [isAdditionalTab]="isAdditionalTab" [navTabs]="navTabsMore" (setTab)="checkTabCall($event,0)"
                                class="col-12 p-0"  (closeTab)="closeNavTab($event)" 
                                [ngClass]="{'edit-icon-section': isReadOnly && !(tabsNameHideAction | showHidePencilButton: activeTab)}"></ngx-globle-nav-tab>
                        </ng-container>
                    </div>
                    <!-- Tab Other Tabs Link -->
                </div>
            </div>
            <activity-section
                class="col-xl-4 col-md-12 common-box pr-0"  
                [entityTypeId]="entityTypeId" 
                [entityId]="accountId" 
                [isTagRequired]="true"
                [isDocumentRequired]="true"
                [refreshDocument]="refreshDocument"
                [refreshActivity]="refreshActivity"
                [entityRecordTypeId]="entityRecordTypeId" 
                (isTagListUpdated)="setRefreshEntityTag()" 
                (isActivityListUpdated)="setRefreshActivityHistory()"
                [isEditPermission]="isEditAccount"
                [isActive]="account.isActive"
                [isPaused]="account.isPaused" 
                [isDocumentDownloadPermission]="isDocumentDownloadPermission && account.isActive && !account.isPaused"
                [createdBy]="account?.createdBy"
                [privacyLevel]="null">
            </activity-section>
        </div>
    </div>
    <!-- Body End-->
</div>